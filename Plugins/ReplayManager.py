# -*- coding: utf-8 -*-
# ba_meta require api 6

exec('import re,base64,string')

exec(base64.b64decode('CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBvcwpmcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lORywgY2FzdAppbXBvcnQgc2h1dGlsLCBzeXMKaW1wb3J0IF9iYQppbXBvcnQgYmEKaW1wb3J0IHJhbmRvbQpmcm9tIGJhc3RkLnVpLm1haW5tZW51IGltcG9ydCBNYWluTWVudVdpbmRvdwpmcm9tIGJhc3RkLnVpLndhdGNoIGltcG9ydCBXYXRjaFdpbmRvdwoKc2VsX3JlcGxheSA9IE5vbmUKb2xkV2F0Y2ggPSBXYXRjaFdpbmRvdy5fcmVmcmVzaF9teV9yZXBsYXlzCnNfY2xyID0gKDAuNTUsMC41LDAuNikKbF9jbHIgPSAoMC41NSwwLjUsMC42KQpkZWYgX25ld193YXRjaChzZWxmKToKICAgIG9sZFdhdGNoKHNlbGYpCiAgICBnbG9iYWwgc2VsX3JlcGxheQogICAgZGVmIGxvbCgpOgogICAgICAgIGdsb2JhbCBzZWxfcmVwbGF5CiAgICAgICAgV2F0Y2hXaW5kb3coKS5fcmVmcmVzaF9teV9yZXBsYXlzKCkKICAgICAgICBzZWxfcmVwbGF5ID0gc2VsZi5fbXlfcmVwbGF5X3NlbGVjdGVkCiAgICAgICAgX3NhdmVyKCkKICAgIAogICAgc2VsZi5fbG9hZCA9IGJ0biA9IGJhLmJ1dHRvbndpZGdldCgKCiAgICAgICAgICAgICAgICAgIHBhcmVudD1zZWxmLl9yb290X3dpZGdldCwKCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uPShzZWxmLl93aWR0aCAqIDAuNSsxNDUsIHNlbGYuX2hlaWdodCAtMTI1KSwKICAgICAgICAgICAgICAgICAgc2l6ZT0oMTUwLCA0NSksCiAgICAgICAgICAgICAgICAgIGxhYmVsPSJMb2FkIiwKICAgICAgICAgICAgICAgICAgY29sb3I9bF9jbHIsCiAgICAgICAgICAgICAgICAgIHRleHRjb2xvcj0oMC43NSwgMC43LCAwLjgpLAogICAgICAgICAgICAgICAgICBhdXRvc2VsZWN0PVRydWUsCiAgICAgICAgICAgICAgICAgIG9uX2FjdGl2YXRlX2NhbGw9X2xvYWRlcikKCiAgICBzZWxmLl9zYXZlID0gYnRuID0gYmEuYnV0dG9ud2lkZ2V0KAoKICAgICAgICAgICAgICAgICAgcGFyZW50PXNlbGYuX3Jvb3Rfd2lkZ2V0LAoKICAgICAgICAgICAgICAgICAgcG9zaXRpb249KHNlbGYuX3dpZHRoICogMC41KzMwMCwgc2VsZi5faGVpZ2h0IC0xMjUpLAogICAgICAgICAgICAgICAgICBzaXplPSgxNTAsIDQ1KSwKICAgICAgICAgICAgICAgICAgbGFiZWw9IlNhdmUiLAogICAgICAgICAgICAgICAgICBjb2xvcj1zX2NsciwKICAgICAgICAgICAgICAgICAgdGV4dGNvbG9yPSgwLjc1LCAwLjcsIDAuOCksCiAgICAgICAgICAgICAgICAgIGF1dG9zZWxlY3Q9VHJ1ZSwKICAgICAgICAgICAgICAgICAgb25fYWN0aXZhdGVfY2FsbD1sb2wpCiAgICBzZWxmLl9kaXNjb3JkID0gYnRuID0gYmEuYnV0dG9ud2lkZ2V0KAoKICAgICAgICAgICAgICAgICAgcGFyZW50PXNlbGYuX3Jvb3Rfd2lkZ2V0LAoKICAgICAgICAgICAgICAgICAgcG9zaXRpb249KHNlbGYuX3dpZHRoICogMC41LTI5NSwgc2VsZi5faGVpZ2h0IC0xMjUpLAogICAgICAgICAgICAgICAgICBzaXplPSgxNTAsIDQ1KSwKICAgICAgICAgICAgICAgICAgbGFiZWw9IkRpc2NvcmQiLAogICAgICAgICAgICAgICAgICBjb2xvcj0oMCwwLDEpLAogICAgICAgICAgICAgICAgICB0ZXh0Y29sb3I9KDAuNzUsIDAuNywgMC44KSwKICAgICAgICAgICAgICAgICAgYXV0b3NlbGVjdD1UcnVlLAogICAgICAgICAgICAgICAgICBvbl9hY3RpdmF0ZV9jYWxsPV9kaXMpCiAgICBzZWxmLl9naXQgPSBidG4gPSBiYS5idXR0b253aWRnZXQoCgogICAgICAgICAgICAgICAgICBwYXJlbnQ9c2VsZi5fcm9vdF93aWRnZXQsCgogICAgICAgICAgICAgICAgICBwb3NpdGlvbj0oc2VsZi5fd2lkdGggKiAwLjUtNDUwLCBzZWxmLl9oZWlnaHQgLTEyNSksCiAgICAgICAgICAgICAgICAgIHNpemU9KDE1MCwgNDUpLAogICAgICAgICAgICAgICAgICBsYWJlbD0iR2l0SHViIiwKICAgICAgICAgICAgICAgICAgY29sb3I9KDAsMCwwKSwKICAgICAgICAgICAgICAgICAgdGV4dGNvbG9yPSgwLjc1LCAwLjcsIDAuOCksCiAgICAgICAgICAgICAgICAgIGF1dG9zZWxlY3Q9VHJ1ZSwKICAgICAgICAgICAgICAgICAgb25fYWN0aXZhdGVfY2FsbD1fZ2l0KQoKCgpkZWYgX2RpcygpOgogICAgbGlua3MgPSBbImh0dHBzOi8vZGlzY29yZC5nZy9OS1FlVFFHY1c4IiwiaHR0cHM6Ly9kaXNjb3JkLmdnL1VuUGFOVzdiemYiLCJodHRwczovL2Rpc2NvcmQuZ2cvUE54S0hoSFZFWiJdCiAgICBfYmEub3Blbl91cmwocmFuZG9tLmNob2ljZShsaW5rcykpCmRlZiBfZ2l0KCk6CiAgICBfYmEub3Blbl91cmwoImh0dHBzOi8vZ2l0aHViLmNvbS9BeXVzaC1EZWVwIikKZGVmIF9zYXZlcigpOgogICAgZ2xvYmFsIHNfY2xyCiAgICBwdGg9b3MucGF0aC5qb2luKF9iYS5lbnYoKVsicHl0aG9uX2RpcmVjdG9yeV91c2VyIl0sIlJlcGxheXMiICsgb3Muc2VwKQogICAgaWYgbm90IHNlbF9yZXBsYXkgaXMgTm9uZToKICAgICAgICBzaHV0aWwuY29weWZpbGUoX2JhLmdldF9yZXBsYXlzX2RpcigpICsgJy8nICtzZWxfcmVwbGF5LHB0aCsiLyIrc2VsX3JlcGxheSkKICAgICAgICBfYmEuc2NyZWVubWVzc2FnZShmIlJlcGxheSB7c2VsX3JlcGxheX0gU2F2ZWQiKQogICAgICAgIHNfY2xyID0gKDAsMSwwKQogICAgICAgIFdhdGNoV2luZG93KCkuX3JlZnJlc2hfbXlfcmVwbGF5cygpCiAgICAgICAgc19jbHIgPSAoMC41NSwwLjUsMC42KQogICAgZWxzZToKICAgICAgICBfYmEuc2NyZWVubWVzc2FnZSgiTm8gUmVwbGF5IFNlbGVjdGVkIikKICAgICAgICBzX2NsciA9ICgxLDAsMCkKICAgICAgICBXYXRjaFdpbmRvdygpLl9yZWZyZXNoX215X3JlcGxheXMoKQogICAgICAgIHNfY2xyID0gKDAuNTUsMC41LDAuNikKZGVmIF9sb2FkZXIoKToKICAgIGdsb2JhbCBsX2NscgogICAgcHRoPW9zLnBhdGguam9pbihfYmEuZW52KClbInB5dGhvbl9kaXJlY3RvcnlfdXNlciJdLCJSZXBsYXlzIiArIG9zLnNlcCkKICAgIG5ldyA9IFtdCiAgICBmb3IgcCBpbiBvcy5saXN0ZGlyKF9iYS5nZXRfcmVwbGF5c19kaXIoKSk6CiAgICAgICAgbmV3LmFwcGVuZChwLmxvd2VyKCkpCiAgICBpZiBsZW4ob3MubGlzdGRpcihwdGgpKSA9PSAwOgogICAgICAgIHZhbCA9IDAKICAgICAgICBfYmEuc2NyZWVubWVzc2FnZSgiTm8gUmVwbGF5IEZvdW5kIikKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaWxlcyA9IFtdCiAgICAgICAgICAgIGZvciBmaWxlIGluIG9zLmxpc3RkaXIocHRoKToKICAgICAgICAgICAgICAgIGlmIGZpbGUuZW5kc3dpdGgoIi5icnAiKToKICAgICAgICAgICAgICAgICAgICBmaWxlcy5hcHBlbmQoZmlsZS5sb3dlcigpKQogICAgICAgICAgICBpZiBmaWxlcyA9PSBbXToKICAgICAgICAgICAgICAgIF9iYS5zY3JlZW5tZXNzYWdlKCJObyBSZXBsYXkgRm91bmQiKQogICAgICAgICAgICAgICAgdmFsID0gMAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9yIGZpIGluIGZpbGVzOgogICAgICAgICAgICAgICAgICAgIGlmIGZpIGluIG5ldzoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXMucmVtb3ZlKGZpKQogICAgICAgICAgICBpZiBmaWxlcyA9PSBbXToKICAgICAgICAgICAgICAgIHZhbCA9IDAKICAgICAgICAgICAgICAgIF9iYS5zY3JlZW5tZXNzYWdlKCJGaWxlcyBBbHJlYWR5IExvYWRlZCIpCiAgICAgICAgICAgIGVsaWYgZmlsZXMgIT0gW106CiAgICAgICAgICAgICAgICBmb3IgZmlsIGluIGZpbGVzOgogICAgICAgICAgICAgICAgICAgIGlmIGZpbCBub3QgaW4gbmV3OgogICAgICAgICAgICAgICAgICAgICAgICBzaHV0aWwuY29weWZpbGUocHRoKyIvIitmaWwsX2JhLmdldF9yZXBsYXlzX2RpcigpICsgJy8nICtmaWwpCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IDEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBfYmEuc2NyZWVubWVzc2FnZShmIlJlcGxheSB7ZmlsfSBBbHJlYWR5IEV4c2lzdFtEZWxldGUgT2xkIE9uZV0iKQogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSAwCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICB2YWwgPSAwCiAgICBpZiB2YWwgPT0gMToKICAgICAgICBsX2NsciA9ICgwLDEsMCkKICAgICAgICBXYXRjaFdpbmRvdygpLl9yZWZyZXNoX215X3JlcGxheXMoKQogICAgICAgIGxfY2xyID0gKDAuNTUsMC41LDAuNikKICAgIGVsaWYgdmFsID09IDA6CiAgICAgICAgbF9jbHIgPSAoMSwwLDApCiAgICAgICAgV2F0Y2hXaW5kb3coKS5fcmVmcmVzaF9teV9yZXBsYXlzKCkKICAgICAgICBsX2NsciA9ICgwLjU1LDAuNSwwLjYpCg=='))

# ba_meta export plugin
class xD(ba.Plugin):
    def __init__(self):
        
        if _ba.env().get("build_number",0) >= 20124:
            WatchWindow._refresh_my_replays = _new_watch
    ph=os.path.join(_ba.env()["python_directory_user"],"Replays" + os.sep)
    if not os.path.isdir(ph):
        os.makedirs(ph)